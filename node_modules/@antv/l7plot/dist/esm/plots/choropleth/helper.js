import { pick, isUndefined } from '@antv/util';
import * as topojson from 'topojson-client';
import { GEO_AREA_URL } from './constants';
export const getGeoAreaConfig = (geoArea) => {
    const config = { url: GEO_AREA_URL, type: 'topojson', extension: 'topo.json' };
    if (isUndefined(geoArea))
        return config;
    if (typeof geoArea === 'string') {
        config.url = geoArea;
    }
    else {
        config.url = (geoArea === null || geoArea === void 0 ? void 0 : geoArea.url) || GEO_AREA_URL;
        config.type = geoArea.type;
        config.extension = geoArea.type === 'topojson' ? 'topo.json' : 'json';
    }
    return config;
};
export const topojson2geojson = (json) => {
    try {
        const geojson = topojson.feature(json, 'json');
        return geojson;
    }
    catch (err) {
        throw new Error('Failed convert to geojson from topojson, topojson default layer name "json"');
    }
};
export const isEqualDrillSteps = (newSteps, oldSteps) => {
    if (newSteps.length !== oldSteps.length) {
        return false;
    }
    for (let index = 0; index < newSteps.length; index++) {
        const { level, granularity } = newSteps[index];
        if (oldSteps[index].level !== level || oldSteps[index].granularity !== granularity) {
            return false;
        }
    }
    return true;
};
export const getDrillStepDefaultConfig = (options) => {
    const config = pick(options, ['source', 'color', 'style', 'state', 'label', 'tooltip']);
    return config;
};
//# sourceMappingURL=helper.js.map